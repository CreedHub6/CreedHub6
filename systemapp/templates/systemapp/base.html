<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Online Food Ordering System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>

  <style>
    :root{
      --brand-1:#ff7f50;
      --brand-2:#ff9900;
      --brand-dark:#e05500;
      --text:#333;
      --muted:#666;
      --bg:#fdfdfd;
      --radius:18px;
      --shadow:0 8px 30px rgba(0,0,0,.08);
    }

    *{box-sizing:border-box}
    body{
      font-family:'Poppins',sans-serif;
      color:var(--text);
      background:var(--bg);
      padding-top:72px;
      padding-bottom:72px;
    }

    .navbar{
      background:linear-gradient(90deg,var(--brand-1),var(--brand-2));
      box-shadow:0 2px 10px rgba(0,0,0,.1);
      transition:transform .25s ease;
    }
    .navbar-brand{
      font-size:1.5rem;
      font-weight:700;
      color:#fff;
      letter-spacing:.5px;
    }
    .navbar-dark .navbar-nav .nav-link{
      color:#fff;
      font-weight:500;
      transition:opacity .2s ease;
    }
    .navbar-dark .navbar-nav .nav-link:hover{opacity:.85}

    .hero{
      position:relative;
      overflow:hidden;
      padding:4rem 0 3rem;
      background:linear-gradient(180deg,#fff7e6 0%, #ffffff 100%);
    }
    .hero .badge{
      background:rgba(255,153,0,.15);
      color:var(--brand-dark);
      border-radius:999px;
      padding:.5rem .9rem;
      font-weight:600;
      font-size:.85rem;
    }
    .hero-title{
      font-weight:800;
      font-size:clamp(2rem,3.2vw,3rem);
      color:var(--brand-dark);
      margin:1rem 0 .5rem;
      line-height:1.15;
    }
    .hero-sub{
      color:var(--muted);
      font-size:1.05rem;
      max-width:680px;
      margin-inline:auto;
    }
    .search-wrap{
      max-width:760px;
      margin:1.75rem auto 0;
      background:#fff;
      border-radius:999px;
      box-shadow:var(--shadow);
      padding:.4rem .5rem;
      display:flex;
      gap:.5rem;
      align-items:center;
    }
    .search-wrap input{
      border:0;
      outline:0;
      padding:.9rem 1rem;
      flex:1;
      font-size:1rem;
      border-radius:999px;
    }
    .btn-primary-brand{
      background:linear-gradient(90deg,var(--brand-1),var(--brand-2));
      border:0;
      color:#fff;
      border-radius:999px;
      padding:.9rem 1.25rem;
      font-weight:600;
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .btn-primary-brand:hover{transform:translateY(-2px); box-shadow:var(--shadow)}

    .section{
      padding:2.5rem 0;
    }

    .chip-scroll{
      display:flex;
      gap:.6rem;
      overflow:auto;
      padding-bottom:.2rem;
      scroll-snap-type:x proximity;
    }
    .chip{
      scroll-snap-align:start;
      background:#fff;
      border:1px solid #eee;
      padding:.55rem .95rem;
      border-radius:999px;
      font-weight:600;
      font-size:.9rem;
      white-space:nowrap;
      transition:background .2s ease,border-color .2s ease, transform .1s ease;
    }
    .chip:hover{background:#fffaf3; border-color:#ffe0b3; transform:translateY(-1px)}

    .card-food{
      border:0;
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow:var(--shadow);
      transition:transform .2s ease;
      height:100%;
      background:#fff;
    }
    .card-food:hover{transform:translateY(-4px)}
    .card-food .thumb{
      aspect-ratio:16/10;
      object-fit:cover;
      width:100%;
    }
    .card-food .badge{
      position:absolute;
      top:.75rem;
      left:.75rem;
      background:#fff;
      color:var(--brand-dark);
      border-radius:999px;
      font-weight:700;
      padding:.35rem .6rem;
      box-shadow:0 6px 20px rgba(0,0,0,.08);
      font-size:.85rem;
    }

    .rating{
      display:flex;
      align-items:center;
      gap:.4rem;
      font-weight:700;
      color:#1f7a1f;
    }
    .price{
      font-weight:800;
      color:#111;
    }
    .muted{color:var(--muted); font-size:.95rem}

    .bottom-nav{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      background:#fff;
      border-top:1px solid #eee;
      display:flex;
      z-index:1030;
    }
    .bottom-nav .nav-item{flex:1; text-align:center}
    .bottom-nav a{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:.2rem;
      padding:.6rem 0 .5rem;
      color:#666;
      font-size:.9rem;
      text-decoration:none;
      transition:color .2s ease, transform .1s ease;
    }
    .bottom-nav a i{font-size:1.25rem}
    .bottom-nav a.active, .bottom-nav a:hover{color:var(--brand-dark)}
    @media (min-width:992px){ .bottom-nav{display:none} }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="{% url 'home' %}">Food Ordering</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto align-items-lg-center">
          <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'restaurant_list' %}active{% endif %}" href="{% url 'restaurant_list' %}">Restaurants</a></li>
          {% if user.is_authenticated %}
            <li class="nav-item d-none d-lg-block mx-2"><a class="btn btn-light btn-sm rounded-pill px-3 fw-semibold" href="{% url 'view_cart' %}"><i class="fa-solid fa-cart-shopping me-1"></i>Cart</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'user_logout' %}"><i class="fas fa-sign-out-alt me-1"></i>Logout</a></li>
          {% else %}
            <li class="nav-item"><a class="nav-link" href="{% url 'user_login' %}"><i class="fas fa-sign-in-alt me-1"></i>Login</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'user_signup' %}"><i class="fas fa-user-plus me-1"></i>Sign Up</a></li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <section class="hero text-center">
    <div class="container">
      <div class="d-inline-flex align-items-center gap-2">
        <span class="badge"><i class="fa-solid fa-bolt me-1"></i>Fast • Fresh • Local</span>
      </div>
      <h1 class="hero-title">Order Your Favorite Food Online</h1>
      <p class="hero-sub">Delicious meals from the best restaurants delivered to your door. Track orders in real-time and enjoy exclusive deals.</p>
      <form action="{% url 'restaurant_list' %}" method="get" class="search-wrap">
        <i class="fa-solid fa-magnifying-glass px-3"></i>
        <input type="text" name="q" placeholder="Search restaurants, meals, or cuisines" value="{{ request.GET.q|default:'' }}">
        <button class="btn btn-primary-brand" type="submit">Search</button>
      </form>
      <div class="mt-3 chip-scroll">
        <a href="{% url 'restaurant_list' %}?cuisine=Pizza" class="chip"><i class="fa-solid fa-pizza-slice me-1"></i>Pizza</a>
        <a href="{% url 'restaurant_list' %}?cuisine=Burger" class="chip"><i class="fa-solid fa-burger me-1"></i>Burgers</a>
        <a href="{% url 'restaurant_list' %}?cuisine=African" class="chip"><i class="fa-solid fa-drumstick-bite me-1"></i>African</a>
        <a href="{% url 'restaurant_list' %}?cuisine=Chinese" class="chip"><i class="fa-solid fa-bowl-food me-1"></i>Chinese</a>
        <a href="{% url 'restaurant_list' %}?cuisine=Breakfast" class="chip"><i class="fa-solid fa-mug-saucer me-1"></i>Breakfast</a>
        <a href="{% url 'restaurant_list' %}?cuisine=Healthy" class="chip"><i class="fa-solid fa-leaf me-1"></i>Healthy</a>
      </div>
      <div class="mt-4">
        <a href="{% url 'restaurant_list' %}" class="btn btn-primary-brand px-4">Start Ordering</a>
      </div>
    </div>
  </section>

  <div class="container section">
    <h3 class="fw-bold mb-3">Featured Restaurants</h3>
    <div class="row g-4">
      {% for r in featured_restaurants %}
      <div class="col-12 col-sm-6 col-lg-4">
        <a href="{% url 'restaurant_detail' r.id %}" class="text-decoration-none">
          <div class="card-food position-relative">
            <img src="{{ r.cover_url|default:'/static/img/placeholder-restaurant.jpg' }}" alt="{{ r.name }}" class="thumb">
            <span class="badge"><i class="fa-solid fa-clock me-1"></i>{{ r.eta|default:'25–35 min' }}</span>
            <div class="p-3">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-1 text-dark">{{ r.name }}</h5>
                <div class="rating"><i class="fa-solid fa-star"></i> <span>{{ r.rating|default:'4.6' }}</span></div>
              </div>
              <div class="muted">{{ r.cuisines|default:'Mixed Cuisines' }}</div>
              <div class="d-flex justify-content-between align-items-center mt-2">
                <div class="muted"><i class="fa-solid fa-location-dot me-1"></i>{{ r.address|truncatechars:26 }}</div>
                <div class="price">{{ r.min_order|default:'₦0' }}</div>
              </div>
            </div>
          </div>
        </a>
      </div>
      {% empty %}
      <div class="col-12">
        <div class="alert alert-light border">No featured restaurants yet.</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <div class="container section">
    <h3 class="fw-bold mb-3">Popular Near You</h3>
    <div class="row g-4">
      {% for m in popular_items %}
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="card-food h-100">
          <img src="{{ m.image_url|default:'/static/img/placeholder-food.jpg' }}" alt="{{ m.name }}" class="thumb">
          <div class="p-3">
            <h5 class="mb-1 text-dark">{{ m.name }}</h5>
            <div class="muted mb-2">{{ m.restaurant.name }}</div>
            <div class="d-flex justify-content-between align-items-center">
              <div class="rating"><i class="fa-solid fa-star"></i> <span>{{ m.rating|default:'4.7' }}</span></div>
              <div class="price">{{ m.price_display|default:'₦—' }}</div>
            </div>
            <div class="mt-3">
              <a href="{% url 'add_to_cart' m.id %}" class="btn btn-primary-brand w-100">Add to Cart</a>
            </div>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-12">
        <div class="alert alert-light border">No popular items yet.</div>
      </div>
      {% endfor %}
    </div>
  </div>

  <div class="container my-4">
    {% block content %}{% endblock %}
  </div>

  {% if user.is_authenticated %}
  <nav class="bottom-nav">
    <div class="nav-item">
      <a href="{% url 'home' %}" class="{% if request.resolver_match.url_name == 'home' %}active{% endif %}">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>
    </div>
    <div class="nav-item">
      <a href="{% url 'view_cart' %}" class="{% if request.resolver_match.url_name == 'view_cart' %}active{% endif %}">
        <i class="fas fa-shopping-cart"></i>
        <span>Cart</span>
      </a>
    </div>
    <div class="nav-item">
      <a href="{% url 'profile' %}" class="{% if request.resolver_match.url_name == 'profile' %}active{% endif %}">
        <i class="fas fa-user"></i>
        <span>Profile</span>
      </a>
    </div>
  </nav>
  {% endif %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
